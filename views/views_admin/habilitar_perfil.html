<style>
    #conteudo {
        padding: 20px;
    }
    h2 {
        width: 96%;
        margin: 10px auto 20px;
    }
    main {
        background-color: #02295421;
        width: 96%;
        margin: 2vh auto;
        border-radius: 12px;
        padding: 16px;
    }
    .novo_usuario {
        margin-block: 10px 30px;
    }
    #tabela_usuarios {
        width: 100% !important;
    }
    #tabela_usuarios tr th,
    #tabela_usuarios tr td {
        text-align: center;
        padding-right: 30px;
    }
    #tabela_usuarios tr th:nth-child(2),
    #tabela_usuarios tr td:nth-child(2) {
        text-align: left;
    }
    #tabela_usuarios box-icon {
        cursor: pointer;
    }
</style>

<h2>Habilitar Perfil</h2>
<main>
    <button class="blue_btn novo_usuario">Adicionar novo usuário</button>

    <table id="tabela_usuarios" class="display compact">
        <thead>
            <tr>
                <th>Matrícula</th>
                <th>Nome</th>
                <th>Data de Cadastro</th>
                <th>Ação</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>123036</td>
                <td>Noan Caliel Brostt</td>
                <td>25/06/2024</td>
                <td>
                    <box-icon
                        name="trash"
                        animation="tada-hover"
                    ></box-icon>
                </td>
            </tr>
            <tr>
                <td>742253</td>
                <td>Noan Caliel Brostt</td>
                <td>25/06/2024</td>
                <td>
                    <box-icon
                        name="trash"
                        animation="tada-hover"
                    ></box-icon>
                </td>
            </tr>
            <tr>
                <td>963246</td>
                <td>Noan Caliel Brostt</td>
                <td>25/06/2024</td>
                <td>
                    <box-icon
                        name="trash"
                        animation="tada-hover"
                    ></box-icon>
                </td>
            </tr>
        </tbody>
    </table>
</main>

<script>

    if (typeof tableUsuarios == 'undefined') {
        
        let tableUsuarios = $("#tabela_usuarios").DataTable({
            processing: true,
            // ajax: {
            //     type: "POST",
            //     url: "data.php",
            //     dataSrc: "",
            // },
            // columns: [
            //     { data: "id" },
            //     { data: "data" },
            //     { data: "descricao" },
            //     { data: "nome" },
            //     { data: "ativo" },
            // ],
            bFilter: true,
            aaSorting: [[1, "asc"]],
            language: {
                sProcessing: "Processando...",
                sLengthMenu: "_MENU_",
                sZeroRecords: "Nenhum resultado encontrado",
                sEmptyTable: "Nenhum resultado encontrado",
                sInfo: "Mostrando de _START_ até _END_ de _TOTAL_ registros",
                sInfoEmpty: "Mostrando de 0 até 0 de 0 registros",
                sInfoFiltered: "(Filtrado de um total de _MAX_ registros)",
                sInfoPostFix: "",
                sSearch: "Buscar:",
                sUrl: "",
                sInfoThousands: ",",
                sLoadingRecords: "Cargando...",
                oPaginate: {
                    sFirst: "Primero",
                    sLast: "Último",
                    sNext: "Próximo",
                    sPrevious: "Anterior",
                },
                oAria: {
                    sSortAscending:
                        ": Ativar para ordenar a columna de maneira ascendente",
                    sSortDescending:
                        ": Ativar para ordenar a columna de maneira descendente",
                },
            },
        });


        $('box-icon[name="trash"]').on("click", function () {
            let usuario = tableUsuarios.row($(this).parent().parent()).data();
    
            Swal.fire({
                title: `Deseja retirar ${usuario[1]} como Admin?`,
                icon: "question",
                showCancelButton: true,
                confirmButtonColor: "#3085d6",
                cancelButtonColor: "#d33",
                confirmButtonText: "Sim, retirar!",
                cancelButtonText: "Não",
            }).then((result) => {
                if (result.isConfirmed) {
                    triggerSweetAlertNotification("info", `${usuario[1]} não é mais Admin!`);
                    // tableUsuarios.ajax.reload();
                }
            });
        });
    }

</script>
